{% extends "base.html" %}

{% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <!-- Page Header -->
      <div class="text-center mb-5">
        <h1 class="display-5 text-primary mb-3">
          <i class="fas fa-download me-3"></i>Import Recipe
        </h1>
        <p class="lead text-muted">
          Import recipes from websites or RSS feeds and customize them for your collection
        </p>
      </div>

      <!-- Import Form -->
      <div class="card shadow">
        <div class="card-header bg-primary text-white">
          <h3 class="card-title mb-0">
            <i class="fas fa-link me-2"></i>Recipe Import
          </h3>
        </div>
        <div class="card-body p-4">
          <form method="post" novalidate>
            {{ form.hidden_tag() }}
            


            <!-- URL Input -->
            <div class="mb-4">
              {{ form.url.label(class="form-label fw-bold") }}
              <div class="input-group">
                <span class="input-group-text">
                  <i class="fas fa-globe"></i>
                </span>
                {{ form.url(class="form-control form-control-lg") }}
              </div>
              <div class="form-text">
                <span id="url-help-text">Enter the URL of a recipe page</span>
              </div>
              {% for error in form.url.errors %}
                <div class="text-danger small mt-1">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- RSS-specific options -->
            <div id="rss-options" class="mb-4" style="display: none;">
              <div class="row">
                <div class="col-md-6">
                  {{ form.max_items.label(class="form-label fw-bold") }}
                  {{ form.max_items(class="form-control") }}
                  <div class="form-text">Maximum number of recipes to import</div>
                  {% for error in form.max_items.errors %}
                    <div class="text-danger small mt-1">{{ error }}</div>
                  {% endfor %}
                </div>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <a href="{{ url_for('main.index') }}" class="btn btn-outline-secondary me-md-2">
                <i class="fas fa-times me-2"></i>Cancel
              </a>
              {{ form.submit(class="btn btn-primary btn-lg") }}
            </div>
          </form>
        </div>
      </div>

      <!-- Help Section -->
      <div class="row mt-5">
        <div class="col-12">
          <div class="card bg-light">
            <div class="card-body">
              <h5 class="card-title">
                <i class="fas fa-info-circle me-2 text-info"></i>How to Import Recipes
              </h5>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <h6 class="fw-bold">
                    <i class="fas fa-link me-2 text-primary"></i>Single Recipe URL
                  </h6>
                  <p class="text-muted small mb-2">
                    Import a single recipe from any recipe website. Our importer supports:
                  </p>
                  <ul class="small text-muted">
                    <li>AllRecipes, Food.com, BBC Good Food</li>
                    <li>Serious Eats, Bon Appétit, Food Network</li>
                    <li>Any site with structured recipe data</li>
                    <li>Automatic parsing of ingredients and instructions</li>
                  </ul>
                </div>
                
              <div class="alert alert-info mt-3">
                <i class="fas fa-lightbulb me-2"></i>
                <strong>Pro Tip:</strong> After importing, you can edit all recipe details, add country of origin, cuisine type, and tags to match your collection's style.
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Popular Recipe Sites -->
      <div class="row mt-4">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h6 class="card-title">
                <i class="fas fa-star me-2 text-warning"></i>Popular Recipe Sites
              </h6>
              <div class="row">
                <div class="col-md-3 mb-2">
                  <small class="text-muted"><a href="https://www.allrecipes.com/">AllRecipes.com</a></small>
                </div>
                <div class="col-md-3 mb-2">
                  <small class="text-muted"><a href="https://www.food.com/">Food.com</a></small>
                </div>
                <div class="col-md-3 mb-2">
                  <small class="text-muted"><a href="https://www.bbcgoodfood.com/">BBC Good Food</a></small>
                </div>
                <div class="col-md-3 mb-2">
                  <small class="text-muted"><a href="https://www.seriouseats.com/">Serious Eats</a></small>
                </div>
                <div class="col-md-3 mb-2">
                  <small class="text-muted"><a href="https://www.bonappetit.com/">Bon Appétit</a></small>
                </div>
                <div class="col-md-3 mb-2">
                  <small class="text-muted"><a href="https://www.foodnetwork.com/">Food Network</a></small>
                </div>
                <div class="col-md-3 mb-2">
                  <small class="text-muted"><a href="https://www.epicurious.com/">Epicurious</a></small>
                </div>
                <div class="col-md-3 mb-2">
                  <small class="text-muted"><a href="https://www.kingarthurbaking.com/">King Arthur Baking</a></small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const importTypeRadios = document.querySelectorAll('input[name="import_type"]');
    const rssOptions = document.getElementById('rss-options');
    const urlHelpText = document.getElementById('url-help-text');
    
    function updateInterface() {
        const selectedType = document.querySelector('input[name="import_type"]:checked').value;
        
        if (selectedType === 'rss') {
            rssOptions.style.display = 'block';
            urlHelpText.textContent = 'Enter the RSS feed URL (e.g., https://example.com/feed.xml)';
        } else {
            rssOptions.style.display = 'none';
            urlHelpText.textContent = 'Enter the URL of a recipe page';
        }
    }
    
    importTypeRadios.forEach(radio => {
        radio.addEventListener('change', updateInterface);
    });
    
    // Initialize on page load
    updateInterface();
});
</script>
{% endblock %}
