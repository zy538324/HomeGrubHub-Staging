{% macro render_comment(comment) %}
<div class="comment mb-3">
    <p><strong>{{ comment.user.username }}</strong> {{ comment.content }}</p>
    <small class="text-muted">{{ comment.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
    {% if current_user.is_authenticated %}
    <div class="mt-2">
        <textarea class="form-control mb-1" rows="2"></textarea>
        <button class="btn btn-sm btn-secondary reply-btn" data-parent="{{ comment.id }}">Reply</button>
    </div>
    {% endif %}
    {% for child in comment.replies %}
        <div class="ms-4">
            {{ render_comment(child) }}
        </div>
    {% endfor %}
</div>
{% endmacro %}
